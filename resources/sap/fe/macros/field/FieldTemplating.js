sap.ui.define(["sap/fe/core/templating/UIFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/helpers/BindingExpression","sap/fe/core/templating/PropertyHelper","sap/fe/core/formatters/ValueFormatter"],function(U,D,B,P,v){"use strict";var _={};var i=P.isPathExpression;var b=B.bindingExpression;var c=B.compileBinding;var t=B.transformRecursively;var f=B.formatResult;var a=B.annotationExpression;var g=D.getPathRelativeLocation;var e=D.enhanceDataModelPath;var d=U.getDisplayMode;var h=function(b,o){return t(b,"Binding",function(p){var q=p;if(p.modelName===undefined){var r=e(o,p.path);q=j(r,p);}return q;});};_.addTextArrangementToBindingExpression=h;var j=function(p,o){var q,r;var s=o;var u=p.targetObject;var w=d(u,p);var x=(q=u.annotations)===null||q===void 0?void 0:(r=q.Common)===null||r===void 0?void 0:r.Text;var y=g(p.contextLocation,p.navigationProperties);o=l(p,o);if(w!=="Value"&&x){switch(w){case"Description":s=a(x,y);break;case"DescriptionValue":s=f([a(x,y),o],v.formatWithBrackets);break;case"ValueDescription":s=f([o,a(x,y)],v.formatWithBrackets);break;}}return s;};_.getBindingWithTextArrangement=j;var k=function(b,o){return t(b,"Binding",function(p){var q=p;if(p.modelName===undefined){var r=e(o,p.path);q=l(r,p);}return q;});};_.formatValueRecursively=k;var E={"Edm.Boolean":{type:"sap.ui.model.odata.type.Boolean"},"Edm.Byte":{type:"sap.ui.model.odata.type.Byte"},"Edm.Date":{type:"sap.ui.model.odata.type.Date"},"Edm.DateTimeOffset":{constraints:{"$Precision":"precision"},type:"sap.ui.model.odata.type.DateTimeOffset"},"Edm.Decimal":{constraints:{"@Org.OData.Validation.V1.Minimum/$Decimal":"minimum","@Org.OData.Validation.V1.Minimum@Org.OData.Validation.V1.Exclusive":"minimumExclusive","@Org.OData.Validation.V1.Maximum/$Decimal":"maximum","@Org.OData.Validation.V1.Maximum@Org.OData.Validation.V1.Exclusive":"maximumExclusive","$Precision":"precision","$Scale":"scale"},type:"sap.ui.model.odata.type.Decimal"},"Edm.Double":{type:"sap.ui.model.odata.type.Double"},"Edm.Guid":{type:"sap.ui.model.odata.type.Guid"},"Edm.Int16":{type:"sap.ui.model.odata.type.Int16"},"Edm.Int32":{type:"sap.ui.model.odata.type.Int32"},"Edm.Int64":{type:"sap.ui.model.odata.type.Int64"},"Edm.SByte":{type:"sap.ui.model.odata.type.SByte"},"Edm.Single":{type:"sap.ui.model.odata.type.Single"},"Edm.Stream":{type:"sap.ui.model.odata.type.Stream"},"Edm.String":{constraints:{"@com.sap.vocabularies.Common.v1.IsDigitSequence":"isDigitSequence","$MaxLength":"maxLength"},type:"sap.ui.model.odata.type.String"},"Edm.TimeOfDay":{constraints:{"$Precision":"precision"},type:"sap.ui.model.odata.type.TimeOfDay"}};var l=function(p,o){var q=o;var r=p.targetObject;if(r._type==="Property"){var T=E[r.type];if(T){q.type=T.type;if(T.constraints){q.constraints={};if(T.constraints.$Scale&&r.scale!==undefined){q.constraints.scale=r.scale;}if(T.constraints.$Precision&&r.precision!==undefined){q.constraints.precision=r.precision;}if(T.constraints.$MaxLength&&r.maxLength!==undefined){q.constraints.maxLength=r.maxLength;}}}}return q;};_.formatLabel=l;var m=function(p,o){var q=g(o,p.navigationProperties);q.push(p.targetObject.name);var r=b(q.join("/"));return c(l(p,r));};_.getValueBinding=m;var n=function(p,o,q,r){var s,u,w,x,y,z,A,C,F,G,H,I,J,K,L,M,N,O;if(!p||typeof p==="string"){return"Text";}var Q=i(p)&&p.$target||p;if((s=Q.annotations)===null||s===void 0?void 0:(u=s.UI)===null||u===void 0?void 0:u.IsImageURL){return"Avatar";}if(Q.type==="Edm.Stream"){return"Avatar";}if(o.$Type==="com.sap.vocabularies.UI.v1.DataPointType"||o.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&o.Target.$target&&o.Target.$target.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){return"Datapoint";}if(o.Criticality){return"ObjectStatus";}if((w=Q.annotations)===null||w===void 0?void 0:(x=w.Measures)===null||x===void 0?void 0:x.ISOCurrency){return"AmountWithCurrency";}if(((y=Q.annotations)===null||y===void 0?void 0:(z=y.Communication)===null||z===void 0?void 0:z.IsEmailAddress)||((A=Q.annotations)===null||A===void 0?void 0:(C=A.Communication)===null||C===void 0?void 0:C.IsPhoneNumber)){return"Link";}if(q===null||q===void 0?void 0:(F=q.targetEntitySet)===null||F===void 0?void 0:(G=F.entityType)===null||G===void 0?void 0:(H=G.annotations)===null||H===void 0?void 0:(I=H.Common)===null||I===void 0?void 0:I.SemanticKey){var S=q.targetEntitySet.entityType.annotations.Common.SemanticKey;var R=!S.every(function(Z){var $;return(Z===null||Z===void 0?void 0:($=Z.$target)===null||$===void 0?void 0:$.name)!==Q.name;});if(R&&r.semanticKeyStyle){var T,V,W;if((T=q.targetEntitySet)===null||T===void 0?void 0:(V=T.annotations)===null||V===void 0?void 0:(W=V.Common)===null||W===void 0?void 0:W.DraftRoot){return"SemanticKeyWithDraftIndicator";}return r.semanticKeyStyle==="ObjectIdentifier"?"ObjectIdentifier":"LabelSemanticKey";}}if((J=Q.annotations)===null||J===void 0?void 0:(K=J.UI)===null||K===void 0?void 0:K.MultiLineText){return"Text";}var X=(q===null||q===void 0?void 0:(L=q.targetEntitySet)===null||L===void 0?void 0:(M=L.entityType)===null||M===void 0?void 0:M.navigationProperties)||[];var Y=false;X.forEach(function(Z){if(Z.referentialConstraint&&Z.referentialConstraint.length){Z.referentialConstraint.forEach(function($){if(($===null||$===void 0?void 0:$.sourceProperty)===Q.name){var a1,b1,c1;if(Z===null||Z===void 0?void 0:(a1=Z.targetType)===null||a1===void 0?void 0:(b1=a1.annotations)===null||b1===void 0?void 0:(c1=b1.UI)===null||c1===void 0?void 0:c1.QuickViewFacets){Y=true;}}});}});if(Y){return"LinkWithQuickViewForm";}if((N=Q.annotations)===null||N===void 0?void 0:(O=N.Common)===null||O===void 0?void 0:O.SemanticObject){return"LinkWrapper";}if(o.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return"Link";}return"Text";};_.getFieldStyle=n;return _;},false);
