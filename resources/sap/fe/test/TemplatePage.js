sap.ui.define(["sap/ui/test/OpaBuilder","sap/ui/test/Opa5","sap/ui/core/util/ShortcutHelper","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MdcFieldBuilder","sap/fe/test/builder/MdcTableBuilder","sap/fe/test/builder/DialogBuilder","sap/fe/test/api/DialogType","sap/fe/test/api/DialogActions","sap/fe/test/api/DialogAssertions","sap/fe/test/api/DialogMessageActions","sap/fe/test/api/DialogMessageAssertions","sap/fe/test/api/TableAssertions","sap/fe/test/api/TableActions","sap/fe/test/api/ChartAssertions","sap/fe/test/api/ChartActions","sap/fe/test/builder/MdcFilterBarBuilder","sap/fe/test/api/FilterBarAssertions","sap/fe/test/api/FilterBarActions","sap/base/util/deepEqual","sap/ushell/resources"],function(O,a,S,U,F,b,T,D,c,d,e,f,g,h,i,C,j,k,l,m,n,r){"use strict";function _(v,t){var q=T.create(v);if(U.isOfType(t,String)){q.hasProperties({header:t});}else{q.hasId(t.id);}return q;}function o(v,q){return k.create(v).hasId(q.id);}function p(v,q,A){if(U.isOfType(q,String,true)){q={type:c.Confirmation,title:q};}var s=new D(v);switch(q.type){case c.Error:s.hasProperties({icon:"sap-icon://message-error",title:"Error"});return A?new d(s,q,true):new e(s,q,true);case c.Message:return A?new f(s,q,true):new g(s,q);default:return A?new d(s,q):new e(s,q);}}return function(v){var V=U.isOfType(v,String)?v:v.viewId,R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.templates"),q=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core"),A=Array.prototype.slice.call(arguments,1);return U.mergeObjects.apply(U,[{viewId:V,actions:{_onTable:function(t){return new i(_(this,t),t);},_onChart:function(s){return new j(F,s);},_onFilterBar:function(s){return new m(o(this,s),s);},onDialog:function(s){return p(this,s,true);},iNavigateBackInDialog:function(){return O.create(this).isDialogElement().hasType("sap.m.Bar").doOnAggregation("contentLeft",O.Matchers.properties({icon:"sap-icon://nav-back",visible:true}),O.Actions.press()).description("Navigating back in dialog").execute();},iOpenVHOnActionDialog:function(s){var t="APD_::"+s+"-inner-vhi";return O.create(this).hasId(t).isDialogElement().doPress().description("Opening value help for '"+s+"'").execute();},_iPressKeyboardShortcut:function(I,s,P,t){return O.create(this).hasId(I).hasProperties(P?P:{}).hasType(t).do(function(E){var N=S.parseShortcut(s);N.type="keydown";E.$().trigger(N);}).description("Execute keyboard shortcut "+s).execute();},iConfirmDialogWithButtonText:function(t){return D.create(this).doPressFooterButton(O.Matchers.properties({text:t})).description("Clicking dialog footer button '"+t+"'").execute();},iCancelActionDialog:function(){return this.iConfirmDialogWithButtonText(q.getText("C_COMMON_ACTION_PARAMETER_DIALOG_CANCEL"));},iConfirmDialog:function(){return this.iConfirmDialogWithButtonText(q.getText("C_COMMON_DIALOG_OK"));},iConfirmDelete:function(){return this.iConfirmDialogWithButtonText(R.getText("C_COMMON_OBJECT_PAGE_DELETE"));},iCancelDelete:function(){return this.iConfirmDialogWithButtonText(q.getText("C_COMMON_OBJECT_PAGE_CANCEL"));},iConfirmActionVHDialog:function(s,t,u){return O.create(this).hasId(s+"."+t+"::"+u+"-ok").isDialogElement().doPress().description("Confirming value help dialog for action "+t).execute();},iCancelActionVHDialog:function(s,t,u){return O.create(this).hasId(s+"."+t+"::"+u+"-cancel").isDialogElement().doPress().description("Cancelling value help dialog for action "+t).execute();},iCollapseExpandPageHeader:function(s){var E=O.Matchers.resourceBundle("tooltip","sap.f","COLLAPSE_HEADER_BUTTON_TOOLTIP"),t=O.Matchers.resourceBundle("tooltip","sap.f","EXPAND_HEADER_BUTTON_TOOLTIP");return O.create(this).hasType("sap.m.Button").has(O.Matchers.some(E,t)).doConditional(s?E:t,O.Actions.press()).description("Resizing of the Page Header").execute();},iCloseMessageBox:function(){return this.iConfirmDialogWithButtonText(q.getText("C_COMMON_SAPFE_CLOSE"));}},assertions:{_onTable:function(t){return new h(_(this,t),t);},_onChart:function(s){return new C(F,s);},_onFilterBar:function(s){return new l(o(this,s),s);},onDialog:function(s){return p(this,s,false);},iSeeThisPage:function(){return O.create(this).hasId(V).viewId(null).viewName(null).description(U.formatMessage("Seeing the page '{0}'",V)).execute();},iSeeFilterDefinedOnActionDialogValueHelp:function(s,t,u,w){return O.create(this).hasId(s+"::"+t+"::FilterBar::FilterField::"+u+"-inner").isDialogElement().hasAggregationProperties("tokens",{text:w}).description("Seeing filter for '"+u+"' set to '"+w+"'").execute();},_iSeeTheMessageToast:function(t){return F.createMessageToastBuilder(t).execute(this);},_iSeeButtonWithText:function(t,B){return F.create(this).hasType("sap.m.Button").hasProperties({text:t}).hasState(B).checkNumberOfMatches(1).description(U.formatMessage("Seeing Button with text '{0}'"+(B?" with state: '{1}'":""),t,B)).execute();},_iSeeElement:function(I,E){return F.create(this).hasId(I).hasState(E).description(U.formatMessage("Seeing Element '{0}'"+(E?" with state: '{1}'":""),I,E)).execute();},iSeeActionParameterDialog:function(s){return O.create(this).hasType("sap.m.Dialog").hasProperties({title:s}).isDialogElement().description("Seeing Action Parameter Dialog with title '"+s+"'").execute();},iSeeActionCustomDialog:function(s){return O.create(this).hasType("sap.m.Text").hasProperties({text:s}).isDialogElement().description("Seeing Action Custom Dialog '"+s+"'").execute();},iSeeActionDefaultDialog:function(){return(O.create(this).hasType("sap.m.Text").has(O.Matchers.resourceBundle("text","sap.fe.core","C_OPERATIONS_ACTION_CONFIRM_MESSAGE")).isDialogElement().description("Seeing Action Default Dialog ").execute());},iSeeActionParameterContent:function(s,t){var u="APD_::"+s+"-inner",B=O.create(this).hasId(u).isDialogElement().description("Seeing Action parameter '"+s+"' with content '"+t+"'");if(t){B.hasProperties({value:t});}return B.execute();},iSeeActionVHDialog:function(s,t,u){return O.create(this).hasId(s+"."+t+"::"+u+"-dialog").isDialogElement().description("Seeing Action Value Help dialog for field "+u).execute();},iSeeActionVHDialogFilterBar:function(s,t,u){return O.create(this).hasId(s+"."+t+"::"+u+"::FilterBar").isDialogElement().description("Seeing Action Value Help FilterBar for field "+u).execute();},iSeeActionVHDialogTable:function(s,t,u){return O.create(this).hasId(s+"."+t+"::"+u+"::Table").isDialogElement().description("Seeing Action Value Help Table for field "+u).execute();},iSeePageHeaderButton:function(s){return O.create(this).hasType("sap.m.Button").has(O.Matchers.resourceBundle("tooltip","sap.f",s?"COLLAPSE_HEADER_BUTTON_TOOLTIP":"EXPAND_HEADER_BUTTON_TOOLTIP")).description("Seeing the "+(s?"Collapse":"Expand")+" Page Header Button").execute();},iSeeTileCreationMessage:function(){return this._iSeeTheMessageToast(r.i18n.getText("tile_created_msg"));},iSeeMessageStrip:function(P){return O.create(this).hasType("sap.m.MessageStrip").hasProperties(P).description(U.formatMessage("Seeing message strip with properties='{0}'",P)).execute();},iSeeBackButtonInDialog:function(s){if(s===undefined){s=true;}return O.create(this).isDialogElement().hasType("sap.m.Bar").hasAggregation("contentLeft",O.Matchers.properties({icon:"sap-icon://nav-back",visible:s})).description(U.formatMessage("Seeing back button in dialog in '{0}' state",s?"visible ":"invisible ")).execute();},iSeeMessageViewInDialog:function(M){return O.create(this).isDialogElement().hasType("sap.m.MessageView").hasAggregation("items",O.Matchers.properties(M)).description(U.formatMessage("Seeing message '{0}' in Message View dialog",M)).execute();},iCheckDialogButton:function(B,s){var t=F.create(this).isDialogElement().hasType("sap.m.Button").hasState(s).description(U.formatMessage("Checking dialog button '{0}' having state='{1}'",B,s));if(U.isOfType(B,String)){t.hasProperties({text:B});}else{t.has(O.Matchers.resourceBundle("text",B.library,B.token,B.parameters));}return t.execute();}}}].concat(A));};});
