sap.ui.define(["sap/fe/test/Utils","./TemplatePage","sap/ui/test/Opa5","sap/ui/test/OpaBuilder","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/VMBuilder","sap/fe/test/builder/OverflowToolbarBuilder","sap/fe/test/api/FooterActionsBase","sap/fe/test/api/FooterAssertionsBase","sap/fe/test/api/HeaderActionsLR","sap/fe/test/api/HeaderAssertionsLR"],function(U,T,O,a,F,V,b,c,d,H,e){"use strict";function g(i){return"fe::table::"+i+"::LineItem";}function f(E){return"fe::Chart::"+E+"::Chart";}function _(o,s){return b.create(o).hasId(s);}function h(o,p){return F.create(o).hasId(p);}return function(p){var A=p.appId,C=p.componentId,E=p.entitySet,i=A+"::"+C,S="fe::table::"+E+"::LineItem",j="fe::Chart::"+E+"::Chart",k="fe::FilterBar::"+E,l=k+"::FilterFieldValueHelp::",r=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core"),I="fe::TabMultipleMode",m="fe::FooterBar",P="fe::ListReport",n=Array.prototype.slice.call(arguments,1);return T.apply(T,[i,{actions:{onTable:function(t){var s;if(t){s=!U.isOfType(t,String)?g(t.property):t;}else{s=S;}return this._onTable({id:s});},onChart:function(v){var s;if(v){s=!U.isOfType(v,String)?f(v.property):v;}else{s=j;}return this._onChart({id:s});},onFilterBar:function(){return this._onFilterBar({id:k});},onHeader:function(){return new H(h(this,P),{id:P});},onFooter:function(){return new c(_(this,m),{id:m});},iExecuteActionOnDialog:function(t){return a.create(this).hasType("sap.m.Button").hasProperties({text:t}).isDialogElement().doPress().description("Pressing dialog button '"+t+"'").execute();},iOpenVHDialog:function(s){return a.create(this).hasId(k+"::FilterField::"+s.replace(/\//g,"::")+"-inner-vhi").doPress().description("Opening value help for dialog'"+s+"'").execute();},iSelectFromVHDTable:function(v){return a.create(this).hasType("sap.m.ColumnListItem").hasAggregationProperties("cells",{value:v}).checkNumberOfMatches(1).isDialogElement().doPress().description("Selecting row from dialog with value '"+v+"'").execute();},iConfirmVHDSelection:function(s,o){var R=a.create(this).hasId(l+s.replace(/\//g,"::")+"-ok").doPress().description("Confirming value help selection for '"+s+"'").execute();if(!o){R=this.onFilterBar().iExecuteSearch();}return R;},iFilterWithVHDialog:function(s,v){var R=this.iOpenVHDialog(s).and.iSelectFromVHDTable(v).and.iConfirmVHDSelection(s);return R;},iOpenIconTabWithTitle:function(N){return a.create(this).hasId(I).has(a.Matchers.aggregation("items",a.Matchers.properties({text:N}))).doPress().description("Selecting Icon Tab "+N).execute();},iSelectDefineConditionPanel:function(s){var R=a.create(this).hasId(l+s+"-VHP--defineCondition").doPress().description("Pressing Define Condition Icon Tab Strip for'"+s+"'").execute();return R;},iSelectOperators:function(){var R=a.create(this).hasType("sap.ui.core.Icon").hasProperties({src:"sap-icon://slim-arrow-down"}).doPress().description("Select list of operators").execute();return R;},iSaveVariant:function(v,s,o){var q=U.parseArguments([String,Boolean,Boolean],arguments),t=V.create(this).hasId("fe::PageVariantManagement");if(q[0]){t.doSaveAs(v,s,o).description(U.formatMessage("Saving variant for '{0}' as '{1}' with default='{2}' and applyAutomatically='{3}'","Page Variant",v,!!s,!!o));}else{t.doSave().description(U.formatMessage("Updating current variant for '{0}'","Page Variant"));}return t.execute();},iSelectVariant:function(v){return V.create(this).hasId("fe::PageVariantManagement").doSelectVariant(v).description(U.formatMessage("Selecting variant '{1}' from '{0}'","Page Variant",v)).execute();}},assertions:{onTable:function(t){if(!t){t={id:S};}else{var s=!U.isOfType(t,String)?t.property:t;t={id:g(s)};}return this._onTable(t);},onChart:function(v){var s;if(v){s=!U.isOfType(v,String)?f(v.property):v;}else{s=j;}return this._onChart({id:s});},onFilterBar:function(){return this._onFilterBar({id:k});},onHeader:function(){return new e(h(this,P),{id:P});},onFooter:function(){return new d(_(this,m),{id:m});},iSeeTheMessageToast:function(t){return this._iSeeTheMessageToast(t);},iSeeFilterFieldsInFilterBar:function(N){return a.create(this).hasId(k).hasAggregationLength("filterItems",N).description("Seeing Filter bar with "+N+" filter fields").execute();},iSeeTableCellWithActions:function(s,o,B){return a.create(this).hasType("sap.m.ColumnListItem").has(a.Matchers.bindingPath(s)).has(function(q){var t=q.getCells()[o];return t.getMetadata().getElementName()==="sap.m.Button"&&t.getText()===B;}).description("Inline Action is present in the table cell with the Text "+B).execute();},iSeeLinkWithText:function(t){return a.create(this).hasType("sap.m.Link").hasProperties({text:t}).description("Seeing link with text '"+t+"'").execute();},iSeeLabelWithText:function(t){return a.create(this).hasType("sap.m.Label").hasProperties({text:t}).description("Not Seeing label with text '"+t+"'").execute();},iSeeSummaryOfAppliedFilters:function(){var s;a.create(this).hasId(k).mustBeVisible(false).do(function(o){s=o.getAssignedFiltersText().filtersText;}).execute();return a.create(this).hasType("sap.f.DynamicPageTitle").has(function(D){return D.getSnappedContent()[0].getText()===s;}).description("The correct text on the collapsed filterbar is displayed").execute();},iSeeVHDialog:function(s){return a.create(this).hasId(l+s.replace(/\//g,"::")+"-dialog").description("Seeing value help dialog for field '"+s+"'").execute();},iSeeVHDTable:function(s){return a.create(this).hasId(l+s.replace(/\//g,"::")+"::Table").has(function(t){return t.getItems().length!==0;}).description("Seeing table of value help dialog for field '"+s+"'").execute();},iCheckVHDTableRows:function(s,o){return a.create(this).hasId(l+s.replace(/\//g,"::")+"::Table").has(function(t){return t.getItems().length===o;}).description("Seeing table of value help dialog for field '"+s+"' with "+o+" rows").execute();},iSeeFieldInVHDFilterBar:function(s,o,q){return a.create(this).hasId(l+s.replace(/\//g,"::")+"::FilterBar::FilterField::"+o).hasProperties(q).description("Seeing field "+s+" in filterbar of valuehelpdialog").execute();},_checkVHDSearchFieldIsVisible:function(s,v){var o=i+"--"+l+s.replace(/\//g,"::")+"::FilterBar";return a.create(this).hasId(o).has(function(q){return v?!!q.getBasicSearchField():!q.getBasicSearchField()||!q.getBasicSearchField().getVisible();}).mustBeVisible(false).description("Search field of value help dialog for field '"+s+"' is "+(v?"visible":"invisible")).execute();},iCheckVHDSearchFieldIsVisible:function(s,v){return this._checkVHDSearchFieldIsVisible(s.replace(/\//g,"::"),v===undefined?true:v);},iSeeVHDFilterBar:function(s){return a.create(this).hasId(l+s.replace(/\//g,"::")+"::FilterBar").description("Seeing value help filterbar for field '"+s+"'").execute();},iSeeFieldOfDCPOnVHDialog:function(s){return a.create(this).hasId(l+s+"-DCP").description("Definition Condition Panel is available in Value Help of field '"+s+"'").execute();},iSeeDeleteConfirmation:function(){return this._iSeeTheMessageToast(r.getText("C_TRANSACTION_HELPER_OBJECT_PAGE_DELETE_TOAST_SINGULAR"));},iSeePageTitle:function(t){return a.create(this).hasType("sap.f.DynamicPageTitle").hasAggregationProperties("heading",{text:t}).description("Seeing title '"+t+"'").execute();},iSeeVariantTitle:function(t){return a.create(this).hasType("sap.m.Title").hasId("fe::PageVariantManagement-text").hasProperties({text:t}).description("Seeing variant title '"+t+"'").execute();},iSeeControlVMFilterBarTitle:function(t){return a.create(this).hasType("sap.m.Title").hasId(k+"::VariantManagement-text").hasProperties({text:t}).description("Seeing variant title '"+t+"'").execute();},iSeeControlVMTableTitle:function(t,s){var o=s?g(s):S;return a.create(this).hasType("sap.m.Title").hasId(o+"::VM-text").hasProperties({text:t}).description("Seeing variant title '"+t+"'").execute();},iSeeVariantModified:function(o,q){var L;if(q){L=k+"::VariantManagement-modified";}else{L="fe::PageVariantManagement-modified";}o=o===undefined?true:o;if(o){return a.create(this).hasType("sap.m.Label").hasId(L).hasProperties({text:"*"}).description("Seeing variant state as 'modified'").execute();}else{return a.create(this).hasType("sap.m.Label").check(function(s){return!s.some(function(t){return t.getId()===L;});},true).description("Seeing variant state as 'not modified'").execute();}},iSeePageVM:function(s){return F.create(this).hasId("fe::PageVariantManagement").hasState(s).description(U.formatMessage("Seeing page VM with state '{0}'",s)).execute();},iSeeControlVMFilterBar:function(){return a.create(this).hasId(k+"::VariantManagement").description("Seeing control VM - FilterBar").execute();},iSeeDraftIndicator:function(){return a.create(this).hasType("sap.m.Link").hasProperties({text:r.getText("C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_DRAFT_OBJECT")}).description("Draft indicator is visible").execute();},iSeeDraftIndicatorLocked:function(u){var t=r.getText("C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_LOCKED_OBJECT")+" "+r.getText("C_EDIT_FLOW_OWNER",[u]);return a.create(this).hasType("sap.m.Link").hasProperties({text:t}).description("Draft indicator is visible and displays '"+t+"'").execute();},iSeeIconTabWithProperties:function(o){return(a.create(this).hasId(I).has(a.Matchers.aggregationMatcher("items",a.Matchers.properties(o))).description(U.formatMessage("Seeing Icon Tab with properties '{0}'",o)).execute());},iSeeNumOfOperators:function(s,o){return a.create(this).hasId(l+s+"-DCP").doOnChildren(a.create(this).hasAggregationLength("items",o)).description("Seeing Value List of Condition Operators with "+o+" item.").execute();}}}].concat(n));};});
