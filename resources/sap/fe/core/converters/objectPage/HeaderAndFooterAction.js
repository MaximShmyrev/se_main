sap.ui.define(["../ManifestSettings","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/helpers/BindingExpression","sap/fe/core/converters/helpers/Key","sap/fe/core/templating/DataModelPathHelper"],function(M,A,C,B,K,D){"use strict";var _={};var i=D.isPathDeletable;var a=K.KeyHelper;var f=B.fn;var e=B.equal;var n=B.not;var c=B.compileBinding;var b=B.annotationExpression;var P=C.Placement;var g=A.getSemanticObjectMapping;var d=A.ButtonType;var h=M.ActionType;function j(o,p){var q,r,s;return((q=o.annotations)===null||q===void 0?void 0:(r=q.UI)===null||r===void 0?void 0:(s=r.Identification)===null||s===void 0?void 0:s.filter(function(t){var u,v;if((t===null||t===void 0?void 0:(u=t.annotations)===null||u===void 0?void 0:(v=u.UI)===null||v===void 0?void 0:v.Hidden)!==true){var w,x,y,z;if((t===null||t===void 0?void 0:t.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&!!t.Determining===p&&(!(t===null||t===void 0?void 0:(w=t.ActionTarget)===null||w===void 0?void 0:w.isBound)||(t===null||t===void 0?void 0:(x=t.ActionTarget)===null||x===void 0?void 0:(y=x.annotations)===null||y===void 0?void 0:(z=y.Core)===null||z===void 0?void 0:z.OperationAvailable)!==false)){return true;}}return false;}))||[];}_.getIdentificationDataFieldForActions=j;function k(o,p){var q,r,s;return((q=o.annotations)===null||q===void 0?void 0:(r=q.UI)===null||r===void 0?void 0:(s=r.Identification)===null||s===void 0?void 0:s.filter(function(t){var u,v;if((t===null||t===void 0?void 0:(u=t.annotations)===null||u===void 0?void 0:(v=u.UI)===null||v===void 0?void 0:v.Hidden)!==true){if((t===null||t===void 0?void 0:t.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&!!t.Determining===p){return true;}}return false;}))||[];}var I=["UI.CriticalityType/VeryPositive","UI.CriticalityType/Positive","UI.CriticalityType/Negative","UI.CriticalityType/VeryNegative"];function l(o){var p,q,r,s,t,u;var v=o.getEntitySet();var S=v&&((p=v.annotations)===null||p===void 0?void 0:(q=p.Session)===null||q===void 0?void 0:q.StickySessionSupported),w=v&&((r=v.annotations.Common)===null||r===void 0?void 0:r.DraftRoot),E=v&&((s=v.annotations)===null||s===void 0?void 0:(t=s.Capabilities)===null||t===void 0?void 0:t.DeleteRestrictions),U=v&&((u=v.annotations.UI)===null||u===void 0?void 0:u.UpdateHidden);var x=o.getDataModelObjectPath(),y=i(x),z=y?c(y):y;var F=j(o.getEntityType(),false);var G=F.filter(function(J){return I.indexOf(J===null||J===void 0?void 0:J.Criticality)>-1;}).map(function(J){return{type:h.DataFieldForAction,annotationPath:o.getEntitySetBasedAnnotationPath(J.fullyQualifiedName),key:a.generateKeyFromDataField(J),isNavigable:true};});if(((w===null||w===void 0?void 0:w.EditAction)||(S===null||S===void 0?void 0:S.EditAction))&&U!==true){G.push({type:h.Primary,key:"EditAction"});}if(z&&z!=="false"||(E===null||E===void 0?void 0:E.Deletable)!==false&&z!=="false"){G.push({type:h.Secondary,key:"DeleteAction",parentEntityDeleteEnabled:z});}var H=k(o.getEntityType(),false);H.filter(function(J){return I.indexOf(J===null||J===void 0?void 0:J.Criticality)===-1;}).map(function(J){var L,N;var O={semanticObjectMapping:J.Mapping?g(J.Mapping):[]};if(J.RequiresContext===true){throw new Error("RequiresContext property should not be true for header IBN action : "+J.Label);}else if(J.Inline===true){throw new Error("Inline property should not be true for header IBN action : "+J.Label);}G.push({type:h.DataFieldForIntentBasedNavigation,text:J.Label,annotationPath:o.getEntitySetBasedAnnotationPath(J.fullyQualifiedName),buttonType:d.Ghost,visible:c(n(e(b((L=J.annotations)===null||L===void 0?void 0:(N=L.UI)===null||N===void 0?void 0:N.Hidden),true))),key:a.generateKeyFromDataField(J),isNavigable:true,press:c(f("._intentBasedNavigation.navigate",[b(J.SemanticObject),b(J.Action),O])),customData:c({semanticObject:b(J.SemanticObject),action:b(J.Action)})});});F.filter(function(J){return I.indexOf(J===null||J===void 0?void 0:J.Criticality)===-1;}).map(function(J){G.push({type:h.DataFieldForAction,annotationPath:o.getEntitySetBasedAnnotationPath(J.fullyQualifiedName),key:a.generateKeyFromDataField(J),isNavigable:true});});return G;}_.getHeaderDefaultActions=l;function m(v,o){var p,q,r,s,t,u,w;var x=o.getEntitySet();var S=x&&((p=x.annotations)===null||p===void 0?void 0:(q=p.Session)===null||q===void 0?void 0:q.StickySessionSupported),E=x&&(((r=x.annotations.Common)===null||r===void 0?void 0:(s=r.DraftRoot)===null||s===void 0?void 0:s.term)||((t=x.annotations)===null||t===void 0?void 0:(u=t.Session)===null||u===void 0?void 0:(w=u.StickySessionSupported)===null||w===void 0?void 0:w.term)),y=E==="com.sap.vocabularies.Common.v1.DraftRoot"||S&&(S===null||S===void 0?void 0:S.SaveAction),z=v>1,F=E==="com.sap.vocabularies.Common.v1.DraftRoot"||S&&(S===null||S===void 0?void 0:S.DiscardAction);var G=j(o.getEntityType(),true);var H=G.filter(function(J){return I.indexOf(J===null||J===void 0?void 0:J.Criticality)>-1;}).map(function(J){return{type:h.DataFieldForAction,annotationPath:o.getEntitySetBasedAnnotationPath(J.fullyQualifiedName),key:a.generateKeyFromDataField(J),isNavigable:true};});if(y){H.push({type:h.Primary,key:"SaveAction"});}if(z){H.push({type:h.DefaultApply,key:"ApplyAction"});}G.filter(function(J){return I.indexOf(J===null||J===void 0?void 0:J.Criticality)===-1;}).map(function(J){H.push({type:h.DataFieldForAction,annotationPath:o.getEntitySetBasedAnnotationPath(J.fullyQualifiedName),key:a.generateKeyFromDataField(J),isNavigable:true});});if(F){H.push({type:h.Secondary,key:"CancelAction",position:{placement:P.End}});}return H;}_.getFooterDefaultActions=m;return _;},false);
