sap.ui.define(["../../helpers/ConfigurableObject","../../helpers/ID","../../helpers/Key","sap/fe/core/converters/annotations/DataField"],function(C,I,K,D){"use strict";var _={};var g=D.getSemanticObjectPath;var a=K.KeyHelper;var F=I.FormID;var P=C.Placement;var i=C.insertCustomElements;var b;(function(b){b["Default"]="Default";b["Annotation"]="Annotation";})(b||(b={}));_.FormElementType=b;function c(k,l){var m=[];var r=l.getEntityTypeAnnotation(k.Target.value);var n=r.annotation;l=r.converterContext;switch(n===null||n===void 0?void 0:n.term){case"com.sap.vocabularies.UI.v1.FieldGroup":n.Data.forEach(function(o){var s=g(l,o);m.push({key:a.generateKeyFromDataField(o),type:b.Annotation,annotationPath:l.getEntitySetBasedAnnotationPath(o.fullyQualifiedName)+"/",semanticObjectPath:s});});break;case"com.sap.vocabularies.UI.v1.Identification":n.forEach(function(o){var s=g(l,o);m.push({key:a.generateKeyFromDataField(o),type:b.Annotation,annotationPath:l.getEntitySetBasedAnnotationPath(o.fullyQualifiedName)+"/",semanticObjectPath:s});});break;default:break;}return m;}function d(k,l){var m=l.getManifestWrapper();var n=m.getFormContainer(k);var o={};if(n===null||n===void 0?void 0:n.fields){Object.keys(n===null||n===void 0?void 0:n.fields).forEach(function(p){o[p]={key:p,type:b.Default,template:n.fields[p].template,label:n.fields[p].label,position:n.fields[p].position||{placement:P.After}};});}return o;}_.getFormElementsFromManifest=d;function e(k,l){return{id:k.ID,formElements:i(c(k,l),d(k,l))};}function f(k,l){var m;var n=[];(m=k.Facets)===null||m===void 0?void 0:m.forEach(function(o){if(o.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){return;}n.push(e(o,l));});return n;}function h(k){return k.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet";}_.isReferenceFacet=h;function j(k,l){var m,n;switch(k.$Type){case"com.sap.vocabularies.UI.v1.CollectionFacet":var o={id:F({Facet:k}),useFormContainerLabels:true,hasFacetsNotPartOfPreview:k.Facets.some(function(q){var r,s;return((r=q.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:s.PartOfPreview)===false;}),formContainers:f(k,l)};return o;case"com.sap.vocabularies.UI.v1.ReferenceFacet":var p={id:F({Facet:k}),useFormContainerLabels:false,hasFacetsNotPartOfPreview:((m=k.annotations)===null||m===void 0?void 0:(n=m.UI)===null||n===void 0?void 0:n.PartOfPreview)===false,formContainers:[e(k,l)]};return p;default:throw new Error("Cannot create form based on ReferenceURLFacet");}}_.createFormDefinition=j;return _;},false);
