sap.ui.define(["sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/ID","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/BindingExpression","sap/fe/core/formatters/FPMFormatter"],function(M,C,I,S,B,f){"use strict";var _={};var r=B.resolveBindingString;var a=B.isConstant;var b=B.formatResult;var c=B.compileBinding;var d=B.bindingExpression;var e=B.annotationExpression;var g=S.replaceSpecialChars;var h=I.CustomActionID;var P=C.Placement;var A=M.ActionType;function j(i){return p(i)||m(i)||l(i)||k();}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function l(o,i){if(!o)return;if(typeof o==="string")return q(o,i);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(o,i);}function m(i){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(i))return Array.from(i);}function p(i){if(Array.isArray(i))return q(i);}function q(n,o){if(o==null||o>n.length)o=n.length;for(var i=0,E=new Array(o);i<o;i++){E[i]=n[i];}return E;}var s;(function(s){s["Accept"]="Accept";s["Attention"]="Attention";s["Back"]="Back";s["Critical"]="Critical";s["Default"]="Default";s["Emphasized"]="Emphasized";s["Ghost"]="Ghost";s["Negative"]="Negative";s["Neutral"]="Neutral";s["Reject"]="Reject";s["Success"]="Success";s["Transparent"]="Transparent";s["Unstyled"]="Unstyled";s["Up"]="Up";})(s||(s={}));_.ButtonType=s;function t(i,n){var o;var E={};var F=[];for(var G in i){var H=i[G];if(H.type===A.Menu){(function(){var J,K;var L=[];var N=(J=(K=H.menu)===null||K===void 0?void 0:K.map(function(O){var Q,R,T;var U=i[O];if(!U){U=n.find(function(U){return U.key===O;});}if(((Q=U)===null||Q===void 0?void 0:Q.visible)||((R=U)===null||R===void 0?void 0:R.type)===A.DataFieldForAction||((T=U)===null||T===void 0?void 0:T.type)===A.DataFieldForIntentBasedNavigation){L.push(U);}return O;}))!==null&&J!==void 0?J:[];if(L.length>1){H.menu=L;}else{N=[G];}F=[].concat(j(F),j(N));})();}E[G]=H;}(o=F)===null||o===void 0?void 0:o.forEach(function(G){return delete E[G];});return E;}var u=function(i){var o={};i.forEach(function(n){var E;if(n===null||n===void 0?void 0:(E=n.menu)===null||E===void 0?void 0:E.length){n.menu.reduce(function(F,G){var H=G.key;if(H&&!F[H]){F[H]=true;}return F;},o);}});return i.filter(function(n){return!o[n.key];});};_.removeDuplicateActions=u;function v(i,n,o,E,F){var G={};for(var H in i){var J,K,L;var N=i[H];var O=(J=N.press)===null||J===void 0?void 0:J.lastIndexOf(".");G[H]={id:h(H),visible:N.visible===undefined?"true":N.visible,enabled:N.enabled===undefined?"true":w(N.enabled,n),handlerModule:N.press&&N.press.substring(0,O).replace(/\./gi,"/"),handlerMethod:N.press&&N.press.substring(O+1),press:N.press,type:N.menu?A.Menu:A.Default,text:N.text,key:g(H),enableOnSelect:N.enableOnSelect,position:{anchor:(K=N.position)===null||K===void 0?void 0:K.anchor,placement:N.position===undefined?P.After:N.position.placement},isNavigable:z(N,E,F),requiresSelection:N.requiresSelection===undefined?false:N.requiresSelection,enableAutoScroll:D(N),menu:(L=N.menu)!==null&&L!==void 0?L:[]};}return t(G,o!==null&&o!==void 0?o:[]);}_.getActionsFromManifest=v;function w(i,n){var o=r(i,"boolean");if(a(o)&&typeof o.value==="boolean"){return o.value;}else if(o._type!=="EmbeddedBinding"){var E=o.value;return c(b([d("/","$view"),E,d("selectedContexts","internal")],f.customIsEnabledCheck,n.getAnnotationEntityType()));}else{return c(o);}}function x(i){var n,o;if(!i){return"true";}if(!i.isBound){return"true";}var E=(n=i.annotations)===null||n===void 0?void 0:(o=n.Core)===null||o===void 0?void 0:o.OperationAvailable;if(E){var F=c(e(E));if(F){var G,H;var J=(G=i.parameters)===null||G===void 0?void 0:(H=G[0])===null||H===void 0?void 0:H.fullyQualifiedName;if(J){J=J.replace(i.fullyQualifiedName+"/","");F=F.replace(J+"/","");}return F;}return"true";}return"true";}_.getEnabledBinding=x;function y(i){var n=[];i.forEach(function(o){var E={"LocalProperty":{"$PropertyPath":o.LocalProperty.value},"SemanticObjectProperty":o.SemanticObjectProperty};n.push(E);});return n;}_.getSemanticObjectMapping=y;function z(i,n,o){var E,F;var G=true;if(o){var H=n&&(n.detail||n.display);G=(H===null||H===void 0?void 0:H.route)?true:false;}if(i&&i.afterExecution&&(((E=i.afterExecution)===null||E===void 0?void 0:E.navigateToInstance)===false||((F=i.afterExecution)===null||F===void 0?void 0:F.enableAutoScroll)===true)||!G){return false;}return true;}_.isActionNavigable=z;function D(i){var n;return(i===null||i===void 0?void 0:(n=i.afterExecution)===null||n===void 0?void 0:n.enableAutoScroll)===true;}_.enableAutoScroll=D;return _;},false);
