sap.ui.define(["sap/fe/core/helpers/BindingExpression","sap/fe/core/templating/PropertyHelper"],function(B,P){"use strict";var _={};var i=P.isPathExpression;var e=B.equal;var c=B.constant;var a=B.annotationExpression;var g=function(n){var v=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(!n){return v.map(function(p){return p.name;});}else{if(v.length>=n.navigationProperties.length){var r=[];n.navigationProperties.forEach(function(p,q){if(v[q]!==p){r.push(v[q]);}});r=r.concat(v.slice(n.navigationProperties.length));return r.map(function(p){return p.name;});}else{var o=[];v.forEach(function(p,q){if(n.navigationProperties[q]!==p){o.push(v[q]);}});o=o.concat(n.navigationProperties.slice(v.length));return o.map(function(p){return p.partner;});}}};_.getPathRelativeLocation=g;var b=function(n,p){var s="";if(i(p)&&p.path){s=p.path;}else if(typeof p==="string"){s=p;}var t;if(i(p)){t=p.$target;}else if(n.targetEntityType){t=n.targetEntityType.resolvePath(s);}else{t=n.targetObject;}var o=s.split("/");var q=n.targetEntitySet;var r=n.targetEntityType;var u=n.navigationProperties.concat();o.reduce(function(v,w){if(!v){return undefined;}var x=v.navigationProperties.find(function(y){return y.name===w;});if(x){u.push(x);r=x.targetType;if(q&&q.navigationPropertyBinding.hasOwnProperty(w)){q=q.navigationPropertyBinding[w];}return r;}return undefined;},n.targetEntityType);return{startingEntitySet:n.startingEntitySet,navigationProperties:u,contextLocation:n.contextLocation,targetEntitySet:q,targetEntityType:r,targetObject:t};};_.enhanceDataModelPath=b;var d=function(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var p="";if(!r){p+="/".concat(n.startingEntitySet.name);}if(n.navigationProperties.length>0){if(p.length>0){p+="/";}p+=n.navigationProperties.map(function(o){return o.name;}).join("/");}if(n.targetObject&&n.targetObject.name&&n.targetObject._type!=="NavigationProperty"&&n.targetObject!==n.startingEntitySet){if(!p.endsWith("/")){p+="/";}p+="".concat(n.targetObject.name);}else if(n.targetObject&&n.targetObject.hasOwnProperty("term")){if(p.length>0&&!p.endsWith("/")){p+="/";}p+="@".concat(n.targetObject.term);}return p;};_.getTargetObjectPath=d;var f=function(n){var p=g(n.contextLocation,n.navigationProperties).join("/");if(n.targetObject&&n.targetObject.name&&n.targetObject._type!=="NavigationProperty"&&n.targetObject!==n.startingEntitySet){if(!p.endsWith("/")){p+="/";}p+="".concat(n.targetObject.name);}else if(n.targetObject&&n.targetObject.hasOwnProperty("term")){if(p.length>0&&!p.endsWith("/")){p+="/";}p+="@".concat(n.targetObject.term);}return p;};_.getContextRelativeTargetObjectPath=f;var h=function(n,p){return m(n,function(o){var q;return o===null||o===void 0?void 0:(q=o.UpdateRestrictions)===null||q===void 0?void 0:q.Updatable;},p);};_.isPathUpdatable=h;var j=function(n,p,t){return m(n,function(o){var q;return o===null||o===void 0?void 0:(q=o.DeleteRestrictions)===null||q===void 0?void 0:q.Deletable;},p,t);};_.isPathDeletable=j;var k=function(n,p){return m(n,function(o){var q;return o===null||o===void 0?void 0:(q=o.InsertRestrictions)===null||q===void 0?void 0:q.Insertable;},p);};_.isPathInsertable=k;var l=function(n,o){return m(n,function(p){var q;var r=(p===null||p===void 0?void 0:(q=p.FilterRestrictions)===null||q===void 0?void 0:q.FilterExpressionRestrictions)||[];var s=r.find(function(t){return t.Property.$target===n.targetObject;});if(s){return o.indexOf(s===null||s===void 0?void 0:s.AllowedExpressions)!==-1;}else{return false;}});};_.checkFilterExpressionRestrictions=l;var m=function(n,o,p,t){var q,r;if(!n||!n.startingEntitySet){return c(true);}n=b(n,p);var s=n.startingEntitySet;var u=null;var v=[];var w=[];var x=s;var y=false;n.navigationProperties.forEach(function(I){if(y){v=[];}v.push(I.name);w.push(I);if(!I.containsTarget){var J=v.join("/");if(s&&s.navigationPropertyBinding.hasOwnProperty(J)){u=s;s=s.navigationPropertyBinding[J];x=s;y=true;}else{u=s;s=null;y=true;}}else{u=s;x=null;}});var z=v.join("/");var A;if(u!==null){var C,D,E;var F=u;(C=F.annotations)===null||C===void 0?void 0:(D=C.Capabilities)===null||D===void 0?void 0:(E=D.NavigationRestrictions)===null||E===void 0?void 0:E.RestrictedProperties.forEach(function(I){var J;if(((J=I.NavigationProperty)===null||J===void 0?void 0:J.type)==="NavigationPropertyPath"){var K=o(I);if(z===I.NavigationProperty.value&&K!==undefined){var L;A=e(a(K,g((L=n)===null||L===void 0?void 0:L.contextLocation,w.slice(0,-1))),true);}}});}var G;var H=o((q=x)===null||q===void 0?void 0:(r=q.annotations)===null||r===void 0?void 0:r.Capabilities);if(H!==undefined){G=e(a(H,g(n.contextLocation,w)),true);}if(t&&!A&&(H===null||H===void 0?void 0:H.path)){var R={"currentEntityRestriction":G};return R;}return A||G||c(true);};_.checkOnPath=m;return _;},false);
