// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/library","sap/ui/model/json/JSONModel","sap/ui/core/Item"],function(C,c,J,I){"use strict";var V=c.ValueState;return C.extend("sap.ushell_abap.transport.controller.TransportInformation",{onInit:function(){this.byId("transportInput").setSuggestionRowValidator(this._suggestionRowValidator);},_suggestionRowValidator:function(o){var a=o.getCells();return new I({key:a[0].getText(),text:a[1].getText()});},onTransportChange:function(){var s=this.byId("transportInput").getSelectedKey(),i=this.byId("transportInput").getValue(),b=this.validate(s,i),t=b?s:null;this.getOwnerComponent().getModel("TransportInformation").setProperty("/transportId",t);this.getOwnerComponent().fireChange({valid:b,empty:!i,required:this.getOwnerComponent().getModel("TransportInformation").getProperty("/required")});},onValidation:function(e){var f=e.getParameters().fieldGroupIds;if(f.indexOf("transportGroup")>-1){this.onTransportChange();e.bCancelBubble=true;}},validate:function(s,v){var t=this.getOwnerComponent().getModel("TransportInformation"),i=t.getProperty("/required"),b=t.getProperty("/transportAllowed"),a=!b||!!s;if(i&&!a){t.setProperty("/valueState",V.Error);}else if(!i&&!a){a=!v;if(a){t.setProperty("/valueState",V.Information);}else{t.setProperty("/valueState",V.Error);}}else{t.setProperty("/valueState",V.None);}return a;}});});
